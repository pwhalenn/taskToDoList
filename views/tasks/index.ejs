<!DOCTYPE html>
<html>
  <head>
    <title>Todo Task</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>
  <body>
    <div class="container mt-4">
      <h2>Daftar Tugas</h2>
      <button id="toggleForm" class="btn btn-primary">Tambah Tugas</button>
      
      <table class="table table-bordered mt-3">
        <thead>
          <tr>
            <th>Nama Tugas</th>
            <th>Kategori</th>
            <th>Deadline</th>
            <th>Status</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% tasks.forEach(task => { %>
          <tr>
            <td><%= task.title %></td>
            <td><%= task.category %></td>
            <td><%= task.deadline %></td>
            <td><%= task.status %></td>
            <td>
                <a href="/tasks/edit/<%= task.id %>" class="btn btn-warning btn-sm">Edit</a>
                <form action="/tasks/delete/<%= task.id %>" method="POST">
                    <button type="submit" class="btn btn-danger btn-sm" >Delete</button>
                </form>
            </td>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>

      <div id="taskForm" class="mt-4" style="display: none;">
        <h2>Tambah Tugas</h2>
        <form action="/tasks" method="POST">
          <div class="mb-3">
            <input type="text" name="title" class="form-control" placeholder="Nama Tugas" required />
          </div>
          <div class="mb-3">
            <input type="text" name="category" class="form-control" placeholder="Kategori" required />
          </div>
          <div class="mb-3">
            <input type="date" name="deadline" class="form-control" required />
          </div>
          <div class="mb-3">
            <input type="text" name="status" class="form-control" placeholder="Status" required />
          </div>
          <button type="submit" class="btn btn-success">Simpan</button>
        </form>
      </div>
    </div>

    <script>
      document.getElementById('toggleForm').addEventListener('click', function () {
        var form = document.getElementById('taskForm');
        if (form.style.display === 'none') {
          form.style.display = 'block';
        } else {
          form.style.display = 'none';
        }
      });
    </script>
  </body>
</html>
